<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat - Tamagotchi</title>
<style>
    body{background:#0b1220;color:#fff;font-family:sans-serif;}
    #chatBox{background:#101a2b;height:300px;overflow-y:auto;padding:10px;margin:10px;border-radius:8px;}
    input,button{padding:8px;margin:4px;border-radius:8px;}
    button{background:#10b981;border:none;color:#fff;font-weight:bold;}
</style>
</head>
<body>
<h2>üí¨ Chat Global</h2>
<div>
    <input id="playerName" placeholder="Nama" />
    <button onclick="login()">Login</button>
</div>
<div id="chatBox"></div>
<input id="msg" placeholder="Ketik pesan..." style="width:70%;">
<button onclick="sendMsg()">Kirim</button>
<div style="margin-top:10px;">
    <button onclick="goTo('index.html')">üè† Home</button>
</div>
<script>
let chats=JSON.parse(localStorage.getItem("chats")||"[]");
let currentPlayer=null;
function login(){
    const name=document.getElementById("playerName").value.trim();
    if(!name)return;
    currentPlayer=name;
    renderChat();
}
function sendMsg(){
    if(!currentPlayer)return alert("Login dulu!");
    const text=document.getElementById("msg").value.trim();
    if(!text)return;
    chats.push({user:currentPlayer,text,time:new Date().toLocaleTimeString()});
    localStorage.setItem("chats",JSON.stringify(chats));
    document.getElementById("msg").value="";
    renderChat();
}
function renderChat(){
    const box=document.getElementById("chatBox");
    box.innerHTML="";
    chats.forEach(c=>{
        box.innerHTML+=`<p><b>${c.user}</b>: ${c.text} <small>${c.time}</small></p>`;
    });
    box.scrollTop=box.scrollHeight;
}
renderChat();
function goTo(p){location.href=p;}
</script>
</body>
</html>
