<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat</title>
<style>
body{ background:#0b1220; color:#fff; font-family:sans-serif; padding:20px; }
#chatBox{ background:#111; height:300px; overflow-y:scroll; padding:10px; margin-bottom:10px; }
</style>
</head>
<body>
<h1>üí¨ Chat</h1>
<div id="chatBox"></div>
<input id="msg" placeholder="Ketik pesan"><button onclick="send()">Kirim</button>
<br><button onclick="back()">‚¨ÖÔ∏è Kembali</button>

<script>
let session=JSON.parse(localStorage.getItem("session")||"{}");
if(!session.currentUser) location.href="login.html";
let chats=JSON.parse(localStorage.getItem("chats")||"[]");

function render(){
  document.getElementById("chatBox").innerHTML=chats.map(c=>`<p><b>${c.user}:</b> ${c.text}</p>`).join("");
}
function send(){
  let t=document.getElementById("msg").value.trim();
  if(!t) return;
  chats.push({user:session.currentUser,text:t});
  localStorage.setItem("chats",JSON.stringify(chats));
  document.getElementById("msg").value="";
  render();
}
function back(){ location.href="menu.html"; }
render();
</script>
</body>
</html>
