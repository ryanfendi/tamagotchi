<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tamagotchi ‚Äî Daftar</title>
<style>
  body{background:#0b1220;color:#fff;font-family:sans-serif;text-align:center}
  .wrap{max-width:520px;margin:0 auto;padding:20px}
  .panel{background:#101a2b;border-radius:12px;padding:16px}
  input,button{padding:10px;border-radius:10px;border:0;margin:6px;width:90%}
  button{background:#10b981;color:#042018;font-weight:700}
  a.btn{display:inline-block;background:#1f2937;color:#fff;text-decoration:none;padding:10px 12px;border-radius:10px;margin-top:6px}
</style>
</head>
<body>
<div class="wrap">
  <h2>üìù Daftar Akun</h2>
  <div class="panel">
    <input id="regUser" placeholder="Username (ID)"/>
    <input id="regEmail" type="email" placeholder="Email (opsional, bisa dipakai login)"/>
    <input id="regPass" type="password" placeholder="Password"/>
    <button onclick="register()">Daftar</button>
    <div><a class="btn" href="index.html">Kembali ke Login</a></div>
  </div>
</div>
<script>
let players = JSON.parse(localStorage.getItem('players')||'{}');
function save(){ localStorage.setItem('players', JSON.stringify(players)); }

function register(){
  const u = (document.getElementById('regUser').value||'').trim().toLowerCase();
  const e = (document.getElementById('regEmail').value||'').trim();
  const p = (document.getElementById('regPass').value||'').trim();
  if(!u || !p) return alert('Isi username & password.');
  if(players[u]) return alert('Username sudah dipakai.');
  // email unik (jika diisi)
  if(e){
    const taken = Object.values(players).some(pl => (pl.email||'').toLowerCase()===e.toLowerCase());
    if(taken) return alert('Email sudah dipakai.');
  }
  players[u] = {
    username: u,
    email: e,
    password: p,
    coins: 1000,
    pet: { level:1, hunger:100, energy:100, hp:100, alive:true, lastTick: Date.now() },
    inventory: []
  };
  save();
  alert('Registrasi berhasil! Silakan login.');
  location.href = 'index.html';
}
</script>
</body>
</html>
