<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Tamagotchi Pixel</title>
<style>
  body { font-family: Arial, sans-serif; text-align:center; background:#222; color:#fff; }
  #game { margin-top:20px; }
  .pet {
    font-size:60px;
    animation: bounce 1s infinite alternate;
  }
  @keyframes bounce {
    from { transform: translateY(0px); }
    to { transform: translateY(-10px); }
  }
  button { margin:5px; padding:10px; border:none; border-radius:8px; cursor:pointer; }
  #leaderboard { margin-top:20px; background:#333; padding:10px; border-radius:10px; }
</style>
</head>
<body>
<h1>🐾 Tamagotchi Pixel 🐾</h1>
<div id="game">
  <div id="pet" class="pet">🐣</div>
  <p>Nama: <span id="petName">Pet1</span></p>
  <p>Level: <span id="level">1</span></p>
  <p>Umur (hari): <span id="age">0</span></p>
  <p>Kenyang hari ini: <span id="feedCount">0</span> / 3</p>
  <p>Status: <span id="status">Sehat</span></p>
  <button onclick="feedPet()">🍖 Beri Makan</button>
  <button onclick="sellPet()">💰 Jual Pet</button>
</div>

<div id="leaderboard">
  <h2>🏆 Leaderboard</h2>
  <ul id="board"></ul>
</div>

<script>
let pet = {
  name: "Pet1",
  level: 1,
  age: 0,
  feedCount: 0,
  lastFeed: Date.now(),
  alive: true
};

let pets = [pet]; // daftar semua pemain
let evoStages = ["🐣","🐥","🐤","🐔","🐲","🐉","👾","🐼","🦊","🐵"];

function updateDisplay(){
  document.getElementById("petName").innerText = pet.name;
  document.getElementById("level").innerText = pet.level;
  document.getElementById("age").innerText = pet.age;
  document.getElementById("feedCount").innerText = pet.feedCount;
  document.getElementById("status").innerText = pet.alive ? "Sehat" : "Mati";
  document.getElementById("pet").innerText = evoStages[pet.age % evoStages.length];
  updateLeaderboard();
}

function feedPet(){
  if(!pet.alive) return alert("Pet sudah mati, mulai ulang!");
  let now = Date.now();
  let hoursPassed = (now - pet.lastFeed)/1000/60/60;
  if(hoursPassed < 4){
    alert("Tunggu 4 jam sebelum memberi makan lagi!");
    return;
  }
  pet.feedCount++;
  pet.lastFeed = now;
  if(pet.feedCount >= 3){
    alert("Pet kenyang hari ini!");
  }
  updateDisplay();
}

function checkDaily(){
  let now = new Date();
  let lastAge = pet.age;
  pet.age++;
  pet.feedCount = 0; // reset makan harian
  if(pet.age - lastAge >= 1){
    evolvePet();
  }
  // cek makan minimal 3x
  if(pet.feedCount < 3 && pet.age > 0){
    pet.alive = false;
    pet.status = "Mati karena kelaparan!";
    alert("❌ Pet mati karena tidak diberi makan 3x sehari. Restart!");
    restartGame();
  }
  updateDisplay();
}

function evolvePet(){
  // setiap 7 hari naik level
  if(pet.age % 7 === 0){
    pet.level++;
    alert("🎉 Level UP! Sekarang level " + pet.level);
  }
}

function restartGame(){
  pet = { name:"Pet"+Math.floor(Math.random()*1000), level:1, age:0, feedCount:0, lastFeed:Date.now(), alive:true };
  pets.push(pet);
  updateDisplay();
}

function updateLeaderboard(){
  let board = document.getElementById("board");
  board.innerHTML = "";
  pets.sort((a,b)=>b.level - a.level);
  pets.forEach(p=>{
    let li = document.createElement("li");
    li.textContent = p.name + " - Level " + p.level + " - Umur " + p.age;
    board.appendChild(li);
  });
}

function sellPet(){
  if(!pet.alive) return alert("Pet mati tidak bisa dijual!");
  alert("💰 Pet " + pet.name + " dijual ke pemain lain!");
  pet.name = "Pet(Sold)";
  updateDisplay();
}

// simulasi harian (untuk testing tiap 30 detik = 1 hari)
setInterval(checkDaily, 30000);

updateDisplay();
</script>
</body>
</html>
