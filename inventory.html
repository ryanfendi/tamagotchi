<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inventory - Tamagotchi Online</title>
  <style>
    body { background:#0b1220; color:#fff; font-family:sans-serif; margin:0; padding:20px; }
    h1 { text-align:center; }
    #inventory { display:grid; grid-template-columns: repeat(auto-fill,minmax(150px,1fr)); gap:15px; margin-top:20px; }
    .item { background:#111; border:1px solid #10b981; border-radius:10px; padding:10px; text-align:center; }
    button { margin-top:10px; padding:5px 10px; border:none; border-radius:6px; cursor:pointer; background:#10b981; color:#fff; }
    #backBtn { background:#f43f5e; margin-bottom:20px; }
  </style>
</head>
<body>
  <button id="backBtn" onclick="goPage('game.html')">‚¨ÖÔ∏è Kembali</button>
  <h1>üì¶ Inventory</h1>
  <div id="inventory"></div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

  <script>
    // Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyAN0GNZdIx_xPHT7MZKWJweLtNhies6QxY",
      authDomain: "tamagotchi-2be0c.firebaseapp.com",
      databaseURL: "https://tamagotchi-2be0c-default-rtdb.firebaseio.com",
      projectId: "tamagotchi-2be0c",
      storageBucket: "tamagotchi-2be0c.firebasestorage.app",
      messagingSenderId: "202052432703",
      appId: "1:202052432703:web:cb76b50e42149a2c92998a",
      measurementId: "G-TWGGSJRX26"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const auth = firebase.auth();

    let user = null;

    auth.onAuthStateChanged(u=>{
      if(u){
        user = u;
        loadInventory();
      } else {
        window.location.href="index.html";
      }
    });

    function loadInventory(){
      db.ref("inventory/"+user.uid).on("value",snap=>{
        const inv = document.getElementById("inventory");
        inv.innerHTML="";
        if(!snap.exists()){
          inv.innerHTML="<p>‚ùå Belum ada item di inventory.</p>";
          return;
        }
        snap.forEach(item=>{
          let val=item.val();
          let div=document.createElement("div");
          div.className="item";
          div.innerHTML=`
            <h3>${val.type === "pet" ? "üêï Pet" : "üéÅ Item"}</h3>
            <p>Level: ${val.level || 1}</p>
            <p>‚è∞ ${new Date(val.time).toLocaleString()}</p>
            <button onclick="useItem('${item.key}')">Gunakan</button>
          `;
          inv.appendChild(div);
        });
      });
    }

    function useItem(id){
      alert("‚úÖ Item "+id+" digunakan!");
      // contoh: hapus dari inventory setelah dipakai
      db.ref("inventory/"+user.uid+"/"+id).remove();
    }

    function goPage(page){
      window.location.href=page;
    }
  </script>
</body>
</html>
