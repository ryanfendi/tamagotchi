<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tamagotchi ‚Äî Owner Panel</title>
<style>
  body{background:#0b1220;color:#fff;font-family:sans-serif;text-align:center}
  .wrap{max-width:720px;margin:0 auto;padding:12px}
  .panel{background:#101a2b;border-radius:12px;padding:14px;margin:10px;text-align:left}
  .menu a,.menu button{background:#1f2937;color:#fff;text-decoration:none;padding:8px 10px;border-radius:10px;border:0;display:inline-block;margin:4px}
  input,button{padding:10px;border-radius:10px;border:0;margin:4px}
  button{background:#10b981;color:#042018;font-weight:700}
  .row{margin:8px 0}
  .warn{color:#fca5a5}
</style>
</head>
<body>
<div class="wrap">
  <h2>üõ†Ô∏è Owner Panel</h2>
  <div class="menu">
    <a href="index.html">üè† Home</a>
    <button onclick="logout()">üö™ Logout</button>
  </div>

  <div id="guard" class="panel">Memeriksa hak akses...</div>

  <div id="ownerUI" class="panel" style="display:none">
    <h3>Top-up Coin</h3>
    <div class="row">
      <input id="tuUser" placeholder="Nama player" />
      <input id="tuAmt" type="number" placeholder="Jumlah coin" />
      <button onclick="topup()">Top-up</button>
    </div>
    <hr>
    <h3>Set Level Pet Aktif</h3>
    <div class="row">
      <input id="lvUser" placeholder="Nama player" />
      <input id="lvNum" type="number" placeholder="Level (1..9999)" />
      <button onclick="setLevel()">Set Level</button>
    </div>
    <hr>
    <h3 class="warn">Hapus Player</h3>
    <div class="row">
      <input id="delUser" placeholder="Nama player" />
      <button onclick="delPlayer()">Hapus</button>
    </div>
  </div>
</div>

<script>
let players = JSON.parse(localStorage.getItem('players')||'{}');
function save(){ localStorage.setItem('players', JSON.stringify(players)); }
function logout(){ localStorage.removeItem('lastUser'); location.href='index.html'; }

const me = localStorage.getItem('lastUser');
const guard = document.getElementById('guard');
if(!me || !players[me]) location.href='index.html';
if(me.toLowerCase()!=='owner'){
  guard.innerHTML = 'Akses ditolak. Halaman ini khusus OWNER.';
}else{
  guard.style.display='none';
  document.getElementById('ownerUI').style.display='block';
}

function topup(){
  const u = (document.getElementById('tuUser').value||'').trim().toLowerCase();
  const a = parseInt(document.getElementById('tuAmt').value||'0');
  if(!players[u]) return alert('Player tidak ditemukan');
  if(!a || a<=0) return alert('Jumlah tidak valid');
  players[u].coins = (players[u].coins||0) + a;
  save(); alert('Top-up berhasil');
}
function setLevel(){
  const u = (document.getElementById('lvUser').value||'').trim().toLowerCase();
  const l = parseInt(document.getElementById('lvNum').value||'0');
  if(!players[u]) return alert('Player tidak ditemukan');
  if(!l || l<1) return alert('Level tidak valid');
  if(!players[u].pets || players[u].pets.length===0) return alert('Player tidak punya pet');
  const idx = players[u].activePet||0;
  players[u].pets[idx].level = l;
  players[u].pets[idx].hunger = 100; players[u].pets[idx].energy=100; players[u].pets[idx].hp=100;
  save(); alert('Level diset');
}
function delPlayer(){
  const u = (document.getElementById('delUser').value||'').trim().toLowerCase();
  if(!players[u]) return alert('Player tidak ditemukan');
  if(!confirm('Yakin hapus player?')) return;
  delete players[u];
  save(); alert('Player dihapus');
}
</script>
</body>
</html>
