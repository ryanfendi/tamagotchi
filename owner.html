<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Owner Panel ‚Äî Tamagotchi</title>
<style>
  body{background:#0b1220;color:#fff;font-family:sans-serif;text-align:center}
  .panel{background:#101a2b;padding:15px;margin:15px auto;width:90%;max-width:560px;border-radius:8px}
  input,button{padding:8px;margin:5px;border-radius:8px;border:0}
  button{background:#10b981;color:#fff;font-weight:bold;cursor:pointer}
</style>
</head>
<body>
<!-- Proteksi -->
<script>
  (function(){
    const current = localStorage.getItem('currentPlayer');
    if(!current){ alert('Silakan login terlebih dahulu'); location.href='login.html'; return; }
    const players = JSON.parse(localStorage.getItem('players')||'{}');
    if(!players[current]){ localStorage.removeItem('currentPlayer'); alert('Akun tidak ditemukan. Silakan login kembali.'); location.href='login.html'; return; }
    if(current !== 'owner'){ alert('Hanya owner yang dapat mengakses halaman ini.'); location.href='index.html'; }
  })();
</script>

<h2>üîê Owner Panel</h2>
<div class="panel">
  <h3>Top-up Coin</h3>
  <input id="targetPlayer" placeholder="Nama Player (username)">
  <input id="amountCoin" type="number" placeholder="Jumlah Coin">
  <button onclick="topupCoin()">Kirim Coin</button>
</div>

<div class="panel">
  <h3>Upgrade Pet Level</h3>
  <input id="targetLevelPlayer" placeholder="Nama Player (username)">
  <input id="newLevel" type="number" placeholder="Level (max 1000)">
  <button onclick="upgradeLevel()">Upgrade Level</button>
</div>

<div class="panel">
  <button onclick="goTo('index.html')">üè† Kembali ke Game</button>
</div>

<script>
let players = JSON.parse(localStorage.getItem('players')||'{}');

function save(){ localStorage.setItem('players', JSON.stringify(players)); }
function goTo(p){ location.href=p; }

function topupCoin(){
  const name = (document.getElementById('targetPlayer').value||'').trim().toLowerCase();
  const amt  = parseInt((document.getElementById('amountCoin').value||'').toString(),10);
  if(!players[name]) return alert('Player tidak ditemukan!');
  players[name].coins = (players[name].coins||0) + (amt||0);
  save();
  alert(`Top-up ${amt} coin ke ${name} berhasil!`);
}

function upgradeLevel(){
  const name = (document.getElementById('targetLevelPlayer').value||'').trim().toLowerCase();
  const level = parseInt((document.getElementById('newLevel').value||'').toString(),10);
  if(!players[name]) return alert('Player tidak ditemukan!');
  if(level>1000) return alert('Max level 1000');
  players[name].pet = players[name].pet || {name:'Chick',level:1,health:1000,alive:true,evoIndex:0};
  players[name].pet.level = level;
  save();
  alert(`Level ${name} diatur ke ${level}`);
}
</script>
</body>
</html>
